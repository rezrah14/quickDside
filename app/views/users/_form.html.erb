<div class="container">
  <%= render "shared/errors", obj: @user %>
  <br>
  <div class="row justify-content-center">
    <div class="col-10">
      <%= form_with(model: @user, class: "shadow p-3 mb-3 bg-light rounded", local: true) do |f| %>
        <div class="form-group row mb-3">
          <div class="col">
            <%= f.label :first_name, class: "form-label-sm" %>
            <%= f.text_field :first_name, class: "form-control", placeholder: "First Name" %>
          </div>
          <div class="col">
            <%= f.label :last_name, class: "form-label-sm" %>
            <%= f.text_field :last_name, class: "form-control", placeholder: "Last Name" %>
          </div>
        </div>
        <div class="form-group row mb-3">
          <div class="col">
            <%= f.label :username, "Username", class: "form-label-sm" %>
            <%= f.text_field :username, class: "form-control", placeholder: "Username" %>
          </div>
          <div class="col">
            <%= f.label :email, "Email", class: "form-label-sm" %>
            <%= f.email_field :email, class: "form-control", placeholder: "Email" %>
          </div>
        </div>
        <div class="form-group row mb-3">
          <div class="col">
            <%= f.label :password, "Password", class: "form-label-sm" %>
            <%= f.password_field :password, class: "form-control password-field", placeholder: "Password", id: "password-field" %>
          </div>
          <div class="col">
            <%= f.label :password_confirmation, "Confirm Password", class: "form-label-sm" %>
            <%= f.password_field :password_confirmation, class: "form-control password-field", placeholder: "Confirm Password", id: "confirm-password-field" %>
          </div>
        </div>
        <div class="form-group row">
          <div class="col">
            <div class="form-check">
              <%= f.check_box :show_password, class: "form-check-input", id: "show-password-checkbox" %>
              <%= label_tag "show-password-checkbox", "Show Password", class: "form-check-label" %>
            </div>
          </div>
        </div>
        <div class="form-group row justify-content-center">
          <%= f.submit(@user.new_record? ? "Sign up" : "Update account", class: "btn btn-primary btn-lg col-3") %>
        </div>
      <% end %>
      <div class="mb-3"> 
        <%= link_to '<<  Cancel and return to home page  >>', root_path %>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const passwordField = document.getElementById("password-field");
    const confirmPasswordField = document.getElementById("confirm-password-field");
    const showPasswordCheckbox = document.getElementById("show-password-checkbox");

    passwordField.addEventListener("input", function() {
      passwordField.classList.remove("password-field");
    });

    confirmPasswordField.addEventListener("input", function() {
      confirmPasswordField.classList.remove("password-field");
    });

    showPasswordCheckbox.addEventListener("change", function() {
      const passwordFieldType = showPasswordCheckbox.checked ? "text" : "password";
      passwordField.setAttribute("type", passwordFieldType);
      confirmPasswordField.setAttribute("type", passwordFieldType);
    });

  });
</script>
